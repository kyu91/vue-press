import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as l,b as s,d as n,e as t,o as h}from"./app-BzqUyvAV.js";const k="/assets/Untitled3-UvpMxcGS.png",e="/assets/Untitled4-BOq9PNyw.png",p="/assets/Untitled5-8r28olS5.png",r="/assets/Untitled6-DkzPMuCb.png",d="/assets/Untitled7-Bhqoawqb.png",A="/assets/Untitled8-BjeEmulM.png",g="/assets/Untitled9-Db0ki0Lw.png",y={};function c(B,i){return h(),l("div",null,[i[0]||(i[0]=s("ul",null,[s("li",null,"SWì‚¬ê´€í•™êµ ì •ê¸€ 5ê¸° 8ì£¼ì°¨ íšŒê³ ")],-1)),n(" more "),i[1]||(i[1]=t(`<h2 id="_1-pintos-á„ƒá…©á†¼á„€á…µá„’á…ªá„‹á…¦-á„€á…ªá†«á„’á…¡á†«-á„Œá…®á„‹á…­-á„‹á…­á†¼á„‹á…¥-á„Œá…¥á†¼á„…á…µ" tabindex="-1"><a class="header-anchor" href="#_1-pintos-á„ƒá…©á†¼á„€á…µá„’á…ªá„‹á…¦-á„€á…ªá†«á„’á…¡á†«-á„Œá…®á„‹á…­-á„‹á…­á†¼á„‹á…¥-á„Œá…¥á†¼á„…á…µ"><span>1. PintOS ë™ê¸°í™”ì— ê´€í•œ ì£¼ìš” ìš©ì–´ ì •ë¦¬</span></a></h2><h3 id="_1-á„‰á…³á„…á…¦á„ƒá…³-thread" tabindex="-1"><a class="header-anchor" href="#_1-á„‰á…³á„…á…¦á„ƒá…³-thread"><span>1) ìŠ¤ë ˆë“œ(Thread)</span></a></h3><ul><li>í”„ë¡œì„¸ìŠ¤ â€˜ë‚´â€™ì—ì„œ ì‹¤í–‰ë˜ëŠ” íë¦„ì˜ â€˜ë‹¨ìœ„â€™ë¥¼ ë§í•œë‹¤.</li><li>ë©€í‹° ìŠ¤ë ˆë“œ(multi_thread) : í”„ë¡œì„¸ìŠ¤ ë‚´ì—ëŠ” ìµœì†Œ í•œê°œ ì´ìƒì˜ ìŠ¤ë ˆë“œê°€ ì‹¤í–‰ ë  ìˆ˜ ìˆë‹¤.</li><li>ì•„ì£¼ í° ì¥ì ìœ¼ë¡œëŠ” í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ì—ì„œëŠ” ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ìì›(ë©”ëª¨ë¦¬)ë¥¼ ê³µìœ í•˜ê²Œ ëœë‹¤.</li></ul><div class="hint-container info"><p class="hint-container-title">ì •ë³´</p><p>ë©€í‹° í”„ë¡œì„¸ìŠ¤ì™€ì˜ ì°¨ì´ì ìœ¼ë¡œëŠ” ê°ê°ì˜ í”„ë¡œì„¸ìŠ¤ëŠ” ìì›ì„ ê³µìœ í•  ìˆ˜ ì—†ë‹¤.</p></div><h3 id="_2-á„‹á…µá†«á„á…¥á„…á…¥á†¸á„á…³á„‹á…´-á„‡á…µá„’á…ªá†¯á„‰á…¥á†¼á„’á…ª-disabling-interrupts" tabindex="-1"><a class="header-anchor" href="#_2-á„‹á…µá†«á„á…¥á„…á…¥á†¸á„á…³á„‹á…´-á„‡á…µá„’á…ªá†¯á„‰á…¥á†¼á„’á…ª-disabling-interrupts"><span>2) ì¸í„°ëŸ½íŠ¸ì˜ ë¹„í™œì„±í™”(Disabling Interrupts)</span></a></h3><ul><li>ì»¤ë„ì˜ ìŠ¤ì¼€ì¥´ë§ ë°©ì‹ì— ë”°ë¼ CPU ì‚¬ìš©ì„ ì„ ì  ë‹¹í•  ìˆ˜ ìˆëŠ”ì§€ì˜ ì—¬ë¶€ê°€ ë‹¬ë¼ì§„ë‹¤.</li><li>PintOSëŠ” ì»¤ë„ ìŠ¤ë ˆë“œê°€ ì–¸ì œë“ ì§€ ì„ ì  ë‹¹í•  ìˆ˜ ìˆëŠ” Preempible kernel(ì„ ì í˜• ì»¤ë„)ì´ë‹¤.</li><li>interruptë¥¼ ë¹„í™œì„±í™” í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œë„ Synchronization(ë™ê¸°í™”)ê°€ ê°€ëŠ¥ <ul><li>ìŠ¤ë ˆë“œ ì„ ì ì€ timer interruptì— ì˜í•´ ì¼ì–´ë‚˜ê¸° ë•Œë¬¸ì— interrupt ìì²´ë¥¼ ë§‰ëŠ”ë‹¤.</li></ul></li><li>ì´ ë°©ë²•ì€ ì™¸ë¶€ ì¸í„°ëŸ½íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ë™ê¸°í™” ì‹œí‚¤ê¸° ìœ„í•´ ì£¼ë¡œ ì‚¬ìš©ëœë‹¤. <ul><li>ì™¸ë¶€ ì¸í„°ëŸ½íŠ¸ëŠ” í”„ë¡œê·¸ë¨ ë‚´ë¶€ì—ì„œ ë°œìƒí•˜ëŠ” ì¸í„°ëŸ½íŠ¸ì™€ ë‹¤ë¥´ê²Œ ì™¸ë¶€ì—ì„œ ë°œìƒí•˜ëŠ” ì¸í„°ëŸ½íŠ¸ë¡œ sleepì´ ë¶ˆê°€ í•˜ë‹¤.</li><li>ë”°ë¼ì„œ ë‹¤ë¥¸ ë™ê¸°í™” ë„êµ¬ê°€ ì‚¬ìš©ë  ìˆ˜ ì—†ê³ , ê°€ì¥ ìš°ì„ ì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì—, ì™¸ë¶€ ì¸í„°ëŸ½íŠ¸ê°€ ì‹¤í–‰ ë˜ëŠ” ë™ì•ˆì€ ë‹¤ë¥¸ ëª¨ë“  ì¸í„°ëŸ½íŠ¸ë¥¼ ë¹„í™œì„±í™” í•œë‹¤.</li></ul></li><li>&lt;thread/interrupt.h&gt;ì— interrupt ë“¤ì€ í™œì„±/ë¹„í™œì„± í•  ìˆ˜ ìˆëŠ” Type, functionë“¤ì´ ìˆë‹¤.</li></ul><h3 id="_3-á„‰á…¦á„†á…¡á„‘á…©á„‹á…¥-semaphores" tabindex="-1"><a class="header-anchor" href="#_3-á„‰á…¦á„†á…¡á„‘á…©á„‹á…¥-semaphores"><span>3) ì„¸ë§ˆí¬ì–´(Semaphores)</span></a></h3><ul><li>ë©€í‹° ìŠ¤ë ˆë“œëŠ” í”„ë¡œì„¸ìŠ¤ì˜ â€˜ê³µìœ ìì›â€™ì„ ì„œë¡œ ê³µìœ í•˜ê²Œ ëœë‹¤.</li><li>ì„ê³„êµ¬ì—­(Critical Section) : ê° ìŠ¤ë ˆë“œì—ì„œ ì´ ê³µìœ ìì›ì„ ì–µì„¸ìŠ¤ í•˜ëŠ” ì½”ë“œ êµ¬ì—­</li></ul><div class="hint-container info"><p class="hint-container-title">ì •ë³´</p><p>ì´ë•Œ ê°™ì€ ê³µìœ ë°ì´í„°ì— ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì ‘ê·¼í•˜ë©´ ì‹œê°„ì°¨ì´ë¡œ ì¸í•œ ì˜ëª»ëœ ê²°ê³¼ë¡œ ì´ì–´ì§€ê¸° ë•Œë¬¸ì—, í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œê°€ ì„ê³„êµ¬ì—­ì— ë“¤ì–´ê°€ ìˆë‹¤ë©´ ë‹¤ë¥¸ ìŠ¤ë ˆë“œë“¤ì€ ì¸ê³„êµ¬ì—­ì— ì ‘ê·¼í•˜ëŠ” ê²ƒì„ â€˜ì œí•œâ€™ í•´ì•¼ í•œë‹¤.</p></div><ul><li>ì„¸ë§ˆí¬(Semaphores) : ê³µìœ ìì›ì„ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì ‘ê·¼ í•˜ì§€ ëª»í•˜ë„ë¡ í•˜ëŠ” ë„êµ¬ <ul><li>Nonnegative integerì™€ ë‘ê°œì˜ Operatorsë¡œ ì´ë£¨ì–´ì§</li><li>Nonnegative integer : ì‚¬ìš© ê°€ëŠ¥í•œ ê³µìœ ìì›ì˜ ê°œìˆ˜ <ul><li>ë§Œì¼ ê°’ì´ 2ë¼ë©´ 2ê°œì˜ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ê³ , ê°’ì´ 0ì´ë©´ ì‚¬ìš©ê°€ëŠ¥í•œ ê³µìœ ìì›ì´ ì—†ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸</li></ul></li><li>Nonnegative integer ì¡°ì‘ ë°©ë²• <ul><li>â€œDownâ€(or â€œPâ€) <ul><li>ìŠ¤ë ˆë“œ ì„ê³„êµ¬ì—­ ì…ì¥ â†’ ê³µìœ ìì› ì‚¬ìš© ìš”ì²­ â†’ ì‚¬ìš©ê°€ëŠ¥í•œ ê³µìœ ìì› ê°œìˆ˜ 1ê°œ ì´ìƒ(ì–‘ìˆ˜) â†’ ìˆ˜ë¥¼ 1 ê°ì†Œ ì‹œí‚´ â†’ ì„ê³„êµ¬ì—­ ì‹¤í–‰(ê³µìœ ìì› ì‚¬ìš©)</li><li>ê³µìœ ìì› ê°œìˆ˜ 0 ì´í•˜ â†’ ì–‘ìˆ˜ê°€ ë ë•Œ ê¹Œì§€ ì„ê³„êµ¬ì—­ì„ ì‹¤í–‰í•˜ì§€ ì•Šê³  ê¸°ë‹¤ë¦¼</li></ul></li><li>â€œUpâ€(or â€œVâ€) <ul><li>ìŠ¤ë ˆë“œê°€ ì„ê³„êµ¬ì—­ì˜ ì‹¤í–‰ì„ ëª¨ë‘ ë§ˆì¹¨ â†’ ê³µìœ ìì› ë°˜ë‚© â†’ ì‚¬ìš© ê°€ëŠ¥í•œ ê³µìœ ìì›ì˜ ê°œìˆ˜ë¥¼ 1 ëŠ˜ë¦¼</li></ul></li></ul></li></ul></li><li>0ìœ¼ë¡œ ì´ˆê¸°í™” ë˜ëŠ” ê²½ìš° : ìŠ¤ë ˆë“œ A ê°€ ìš°ì„  ê¸°ë‹¤ë¦¼ â†’ ìŠ¤ë ˆë“œ Bì˜ ì‘ì—…ì´ ëë‚˜ë©´ Aê°€ ì‹¤í–‰</li><li>1ë¡œ ì´ˆê¸°í™” ë˜ëŠ” ê²½ìš° : ìŠ¤ë ˆë“œ A ê°€ ìš°ì„  ì‹¤í–‰ë¨ â†’ Aì˜ ì‘ì—…ì´ ëë‚˜ë©´ ê¸°ë‹¤ë¦¬ë˜ Bê°€ ì‹¤í–‰</li></ul><h3 id="_4-locks" tabindex="-1"><a class="header-anchor" href="#_4-locks"><span>4) Locks</span></a></h3><ul><li>ì„¸ë§ˆí¬ë‘ ë§ˆì°¬ê°€ì§€ë¡œ ê³µìœ ìì›ì„ ê´€ë¦¬í•˜ëŠ” ë™ê¸°í™”ë„êµ¬ ì¤‘ í•˜ë‚˜ë‹¤.</li><li>â€œUpâ€ëŒ€ì‹  â€œreleaseâ€, â€œDownâ€ ëŒ€ì‹  â€œacquireâ€ë¼ëŠ” ì´ë¦„ì˜ Operatorë¡œ ë™ì‘</li></ul><div class="hint-container info"><p class="hint-container-title">ì •ë³´</p><p>Lockì—ëŠ” ì„¸ë§ˆí¬ì—ëŠ” ì—†ëŠ” í•˜ë‚˜ì˜ ì œì•½ì´ ìˆë‹¤! ë°‘ì— ì„¤ëª…</p></div><ul><li>Acquireë¥¼ í˜¸ì¶œí•œ ìŠ¤ë ˆë“œë§Œì´ í•´ë‹¹ Lockì„ release í•  ìˆ˜ ìˆë‹¤.</li></ul><h3 id="_5-monitors" tabindex="-1"><a class="header-anchor" href="#_5-monitors"><span>5) Monitors</span></a></h3><ul><li>ê³µìœ ìì›, ëª¨ë‹ˆí„° ë½, ì¡°ê±´ë³€ìˆ˜ë¡œ ì´ë£¨ì–´ ì§„ë‹¤.</li><li>ê°ê°ì˜ ìŠ¤ë ˆë“œë“¤ì€ ì„œë¡œ Mutual Exclustion(ìƒí˜¸ë°°íƒ€)ê°€ ëœë‹¤. <ul><li>ì¦‰, ê³µìœ ìì›ì„ í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë§Œ ì‚¬ìš© í•  ìˆ˜ ìˆëŠ” ìƒíƒœê°€ ëœë‹¤.</li></ul></li><li>ì¢€ë” ê³µë¶€ê°€ í•„ìš”!</li></ul><hr><h2 id="_2-á„‹á…¡á†¯á„…á…¡á†·á„‰á…µá„€á…¨-á„€á…®á„’á…§á†«" tabindex="-1"><a class="header-anchor" href="#_2-á„‹á…¡á†¯á„…á…¡á†·á„‰á…µá„€á…¨-á„€á…®á„’á…§á†«"><span>2. ì•ŒëŒì‹œê³„ êµ¬í˜„</span></a></h2><h3 id="_1-á„†á…©á†¨á„‘á…­" tabindex="-1"><a class="header-anchor" href="#_1-á„†á…©á†¨á„‘á…­"><span>1) ëª©í‘œ</span></a></h3><ul><li>í˜„ì¬ëŠ” timer_sleep()ì—ì„œ ë§¤ í‹±ë§ˆë‹¤ thread_yield ()ë¡œ ê¹¨ì›Œì„œ í™•ì¸ í•˜ê³  ìˆë‹¤.</li></ul><div class="language-c" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">timer_sleep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int64_t</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> ticks</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    int64_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> start </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> timer_ticks</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> //ticksê°’ì„ ë°˜í™˜ í•¨</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ASSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">intr_get_level</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> () </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">==</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> INTR_ON);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    while</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">timer_elapsed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (start) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ticks)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">         thread_yield</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ();</span></span></code></pre></div><ul><li>CPUê°€ ë§¤ìš° ë¹„íš¨ìœ¨ ì ìœ¼ë¡œ ì¼ì–´ë‚  ì‹œê°„ì„ í™•ì¸ í•˜ê³  ìˆë‹¤.</li><li>ì´ ë°©ì‹ì„ busy waits ë°©ì‹ì´ë¼ê³  í•œë‹¤.</li></ul><figure><img src="`+k+'" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><p>ğŸ’¡ ë”°ë¼ì„œ ìš°ë¦° ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ í™•ì¸ ë¹„ìš©ì„ ì¤„ì—¬ ì¼ì–´ë‚˜ì•¼ í•  ì‹œê°„ì— ìŠ¤ë ˆë“œë¥¼ ê¹¨ìš°ëŠ” ì•ŒëŒì‹œê³„ë¥¼ ë§Œë“¤ë©´ ëœë‹¤.</p><h3 id="_2-á„‡á…¡á†¼á„‡á…¥á†¸" tabindex="-1"><a class="header-anchor" href="#_2-á„‡á…¡á†¼á„‡á…¥á†¸"><span>2) ë°©ë²•</span></a></h3><ul><li>block_listë¥¼ ë§Œë“¤ì–´ ë¸”ë¡ ìƒíƒœì¸ ìŠ¤ë ˆë“œë¥¼ ë„£ì–´ ê´€ë¦¬í•œë‹¤. <ul><li>í˜„ì¬ëŠ” ëª¨ë‘ ready_listì— ìˆë‹¤.</li><li>ì–´ë–»ê²Œ block_listì— ë„£ëŠ”ê°€?</li></ul></li><li>ë¸”ë¡í•˜ë©´ì„œ ì–´ë”˜ê°€ì— ë„£ì„ë•Œ ê¹¨ìš¸ ì‹œê°„ì„ ë„£ì–´ì„œ ì €ì¥í•´ì•¼ í•œë‹¤. <ul><li>ê¹¨ìš¸ ì‹œê°„ì€ ì–´ë–»ê²Œ ì €ì¥ í•˜ëŠ”ê°€?</li><li>ê¹¨ìš¸ ì‹œê°„ì€ ì–´ë””ì„œ ì²´í¬í•˜ëŠ”ê°€?</li><li>ì ë“  ìŠ¤ë ˆë“œëŠ” ì–´ë””ì— ì €ì¥ í•˜ëŠ”ê°€?</li></ul></li><li>ìœ„ì™€ ê°™ì€ ë¬¼ìŒë“¤ì„ í•˜ë‚˜ì”© í•´ê²° í•´ì•¼ í•œë‹¤.</li></ul><figure><img src="'+e+`" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h3 id="_3-sleep-listá„…á…³á†¯-á„†á…¡á†«á„ƒá…³á†¯á„‹á…¥-á„Œá…¡á†·á„Œá…¡á„‚á…³á†«-threadá„…á…³á†¯-á„Œá…¥á„Œá…¡á†¼á„’á…¡á„Œá…¡" tabindex="-1"><a class="header-anchor" href="#_3-sleep-listá„…á…³á†¯-á„†á…¡á†«á„ƒá…³á†¯á„‹á…¥-á„Œá…¡á†·á„Œá…¡á„‚á…³á†«-threadá„…á…³á†¯-á„Œá…¥á„Œá…¡á†¼á„’á…¡á„Œá…¡"><span>3) sleep_listë¥¼ ë§Œë“¤ì–´ ì ìëŠ” threadë¥¼ ì €ì¥í•˜ì</span></a></h3><ul><li>PintSO ìë£ŒëŠ” listë¥¼ ì‰½ê²Œ ë§Œë“¤ê³  ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì½”ë“œê°€ ì œê³µëœë‹¤.</li><li>ìš°ë¦¬ëŠ” sleep_listë¥¼ ìƒì„±í•˜ì—¬ ì ë“¤ì€ threadë¥¼ ê´€ë¦¬í•˜ê² ë‹¤.</li></ul><div class="language-c" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//thread.c</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">thread_init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">list_init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sleep_list);</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  //sleep_list ìƒì„±</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h3 id="_4-sleep-listá„‹á…¦-á„‚á…¥á‡‚á„€á…µ-á„Œá…¥á†«-thread-á„€á…®á„Œá…©á„á…¦á„‹á…¦-á„‹á…µá†¯á„‹á…¥á„‚á…¡á†¯-á„‰á…µá„€á…¡á†«á„‹á…³á†¯-á„€á…µá„…á…©á†¨" tabindex="-1"><a class="header-anchor" href="#_4-sleep-listá„‹á…¦-á„‚á…¥á‡‚á„€á…µ-á„Œá…¥á†«-thread-á„€á…®á„Œá…©á„á…¦á„‹á…¦-á„‹á…µá†¯á„‹á…¥á„‚á…¡á†¯-á„‰á…µá„€á…¡á†«á„‹á…³á†¯-á„€á…µá„…á…©á†¨"><span>4) sleep_listì— ë„£ê¸° ì „ thread êµ¬ì¡°ì²´ì— ì¼ì–´ë‚  ì‹œê°„ì„ ê¸°ë¡</span></a></h3><ul><li>threadêµ¬ì¡°ì²´ì— wakeup_timeì´ë¼ëŠ” ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ì—¬ ì¤€ë‹¤.</li></ul><div class="language-c" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//thread.h</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int64_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> wakeup_time;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                /*ì ì” ë…¸ë“œê°€ ì¼ì–´ë‚  ì‹œê°„*/</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h3 id="_5-á„‹á…µá†¯á„‹á…¥á„‚á…¡á†¯-á„‰á…µá„€á…¡á†«á„‹á…³á†«-á„‹á…¥á„„á…¥á‡‚á„€á…¦-á„‹á…¥á„ƒá…µá„‰á…¥-á„‚á…¥á‡‚á„‹á…¥á„Œá…®á†¯á„á…¡" tabindex="-1"><a class="header-anchor" href="#_5-á„‹á…µá†¯á„‹á…¥á„‚á…¡á†¯-á„‰á…µá„€á…¡á†«á„‹á…³á†«-á„‹á…¥á„„á…¥á‡‚á„€á…¦-á„‹á…¥á„ƒá…µá„‰á…¥-á„‚á…¥á‡‚á„‹á…¥á„Œá…®á†¯á„á…¡"><span>5) ì¼ì–´ë‚  ì‹œê°„ì€ ì–´ë–»ê²Œ, ì–´ë””ì„œ ë„£ì–´ì¤„ê¹Œ?</span></a></h3><ul><li>ì¼ì–´ë‚  ì‹œê°„ì€ â€˜OSê°€ ì‹œì‘ëœ ì‹œê°„ + ì˜ì‹œê°„â€™ìœ¼ë¡œ ì €ì¥ í•œë‹¤.</li><li>timer_sleepí•¨ìˆ˜ì—ì„œ thread_sleepí•¨ìˆ˜ë¥¼ í˜¸ì¶œí• ë•Œ ì¼ì–´ë‚  ì‹œê°„ì„ ê³„ì‚°í•˜ì—¬ ë„˜ê¸´ë‹¤.</li></ul><div class="language-c" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//timer.c</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">timer_sleep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int64_t</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> ticks</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    int64_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> start </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> timer_ticks</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> //OSê°€ ì‹œì‘ëœ ì‹œê°„ìœ¼ë¡œë¶€í„°ì˜ ticksê°’ì„ ë°˜í™˜ í•¨</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ASSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">intr_get_level</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> () </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">==</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> INTR_ON);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    thread_sleep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(start </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">+</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ticks);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><ul><li>ê·¸ë¦¬ê³  thread_sleep í•¨ìˆ˜ì—ì„œ ì¼ì–´ë‚  ì‹œê°„ì„ ë„£ì–´ ì¤€ë‹¤.</li><li>interruptë¡œ ì›ìì„±ì„ ë³´ì¥í•œë‹¤.</li><li>ì„ ì–¸í•œ thread êµ¬ì¡°ì²´ì˜ wakeup_time ê°’ì„ ticks ë°”ê¿”ì¤€ë‹¤.</li><li>list_push_back ë¥¼ ì‚¬ìš©í•˜ì—¬ sleep_listì— ì‚½ì…í•œë‹¤.</li><li>ë§ˆì§€ë§‰ìœ¼ë¡œ threadë¥¼ blockí•˜ê³  ìŠ¤ì¼€ì¥´ë§í•œë‹¤.</li></ul><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//thread.c</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">thread_sleep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int64_t</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> ticks</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">cur </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> thread_current</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     //í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ìŠ¤ë ˆë“œ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    enum</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> intr_level old_level;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                //ì§€ê¸ˆ ì¸íŠ¸ëŸ¬ë¥íŠ¸</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    old_level </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> intr_disable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">         //interrupt off</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    cur </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ì„ ì–¸í•œ thread êµ¬ì¡°ì²´ì˜ wa;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //ê¹¨ì–´ë‚˜ì•¼ í•  ticks ì €ì¥</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    list_push_back</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sleep_list, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">cur</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">elem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //ìŠ¬ë¦½ í ì‚½ì…</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    thread_block</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                    //blockí•˜ê³ </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    intr_set_level</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (old_level);</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            //interrupt on</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-á„á…¢á„‹á…®á†¯á„„á…¢á„‚á…³á†«-á„‹á…¥á„„á…¥á‡‚á„€á…¦-á„á…¢á„‹á…®á†¯á„á…¡" tabindex="-1"><a class="header-anchor" href="#_6-á„á…¢á„‹á…®á†¯á„„á…¢á„‚á…³á†«-á„‹á…¥á„„á…¥á‡‚á„€á…¦-á„á…¢á„‹á…®á†¯á„á…¡"><span>6) ê¹¨ìš¸ë•ŒëŠ” ì–´ë–»ê²Œ ê¹¨ìš¸ê¹Œ?</span></a></h3><ul><li>ê°„ë‹¨íˆëŠ” sleep_listë¥¼ í™•ì¸í•˜ì—¬ í˜„ì¬ ì‹œê°„ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì€ wakeup_timeì¸ threadë¥¼ ê¹¨ìš´ë‹¤.</li><li>list_begin í•¨ìˆ˜ë¡œ sleep_listì˜ ì‹œì‘ elemë¥¼ ê°€ì ¸ì˜¨ë‹¤.</li><li>ê°€ì ¸ì˜¨ threadì˜ wakeup_timeì„ ë¹„êµí•˜ì—¬ ê¹¨ì›Œì•¼í•˜ë©´ ë¦¬ìŠ¤íŠ¸ì—ì„œ ì‚­ì œ í›„ unblock í•œë‹¤.</li></ul><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//thread.c</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">thread_awake</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int64_t</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> ticks</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">){</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // í˜„ì¬ ì‹œê°„</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    /*sleep_listì˜ ëª¨ë“  entryìˆœíšŒ*/</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> list_elem </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> list_begin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sleep_list);</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     //sleep_listì˜ ì‹œì‘ ìŠ¤ë ˆë“œ í¬ì¸í„°ë¥¼ ë¦¬ìŠ¤íŠ¸ìš”ì†Œë¡œ í• ë‹¹</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  while</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (e </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">!=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> list_end</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sleep_list)){</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                //sleep_listì˜ ì‹œì‘ê³¼ ëì´ ê°™ì§€ ì•Šë‹¤ë©´ ë°˜ë³µë¬¸ ì‹œì‘(ê°™ì„ë•Œê¹Œì§€)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">t </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> list_entry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (e, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread, elem);</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     //e(sleep_list ì‹œì‘)ì˜ í¬ì¸í„°ë¥¼ thread t êµ¬ì¡°ì²´ í¬ì¸í„°ë¡œ í• ë‹¹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">wakeup_time</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ticks){</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ìŠ¤ë ˆë“œì˜ ì¼ì–´ë‚œ ì‹œê°„ì´ ì§€ê¸ˆ ì‹œê°„ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ìœ¼ë©´</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      e </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> list_remove</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (e);</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // sleep list ì—ì„œ ì œê±°</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      thread_unblock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (t);</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ìŠ¤ë ˆë“œ unblock</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    else</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      e </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> list_next</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (e);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ì§€ê¸ˆê¹Œì§€ êµ¬í˜„ì„ í•˜ë©´ ì¢€ë” íš¨ìœ¨ì ì¸ thread ê¹¨ìš°ê¸° ë°©ë²•ì´ ëœë‹¤.</li><li>í•˜ì§€ë§Œ ìœ„ ê³¼ì •ì„ ë³´ë©´ í•œê°€ì§€ ê±¸ë¦¬ëŠ” ë¶€ë¶„ì´ ìƒê¸¸ ê²ƒì´ë‹¤.</li><li>ë°”ë¡œ â€˜Runningì„ ì‹œí‚¤ëŠ” ê¸°ì¤€ì— ëŒ€í•´ì„œâ€™ ì´ë‹¤.</li><li>ë‹¤ìŒê³¼ì •ì€ ìš°ì„ ìˆœìœ„ë¥¼ ê³ ë ¤í•˜ì—¬ Threadë¥¼ Running ë°©ë²•ì— ëŒ€í•´ êµ¬í˜„ì„ í•˜ê² ë‹¤.</li></ul><h2 id="_3-á„‹á…®á„‰á…¥á†«á„‰á…®á†«á„‹á…±-á„‰á…³á„á…¦á„Œá…²á†¯á„…á…µá†¼-priority-scheduling-1" tabindex="-1"><a class="header-anchor" href="#_3-á„‹á…®á„‰á…¥á†«á„‰á…®á†«á„‹á…±-á„‰á…³á„á…¦á„Œá…²á†¯á„…á…µá†¼-priority-scheduling-1"><span>3. ìš°ì„ ìˆœìœ„ ìŠ¤ì¼€ì¥´ë§(Priority Scheduling)_1</span></a></h2><h3 id="_1-á„†á…®á†«á„Œá…¦á„Œá…¥á†·" tabindex="-1"><a class="header-anchor" href="#_1-á„†á…®á†«á„Œá…¦á„Œá…¥á†·"><span>1) ë¬¸ì œì </span></a></h3><ul><li>í˜„ì¬ ë¬¸ì œì ì€ ready_listì— ìŠ¤ë ˆë“œë¥¼ ë„£ëŠ” ê³¼ì •ì—ì„œ ë¬´ì¡°ê±´ ì¡°ê±´ ì—†ì´ ë’¤ì— ë„£ê³  ìˆë‹¤.</li><li>threadì˜ priorityê°€ ê°€ì¥ ë¹ ë¥¸ ê²ƒì´ ë¨¼ì € ì‹¤í–‰ì´ ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ìš°ë¦° ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ì—¬ í•œë‹¤.</li></ul><h3 id="_2-á„†á…©á†¨á„‘á…­" tabindex="-1"><a class="header-anchor" href="#_2-á„†á…©á†¨á„‘á…­"><span>2) ëª©í‘œ</span></a></h3><ul><li>ready_list ì˜ threadë¥¼ ìš°ì„  ìˆœìœ„(priority)ë¥¼ ê³ ë ¤í•˜ì—¬ running í•˜ê¸°</li></ul><h3 id="_3-á„‡á…¡á†¼á„‡á…¥á†¸" tabindex="-1"><a class="header-anchor" href="#_3-á„‡á…¡á†¼á„‡á…¥á†¸"><span>3) ë°©ë²•</span></a></h3><ul><li>ë°©ë²• 1 : ready_listì—ì„œ popì„ í• ë•Œ ìš°ì„ ìˆœìœ„ë¥¼ ê³ ë ¤</li><li>ë°©ë²• 2: ready_listì— pushë¥¼ í• ë•Œ ìš°ì„ ìˆœìœ„ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬</li></ul><p>ğŸ’¡ list.cì— list_insert_ordered() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë°©ë²• 2ë²ˆìœ¼ë¡œ êµ¬í˜„ì„ í•˜ë ¤ í•œë‹¤.</p><h3 id="_4-list-insert-ordered-á„’á…¡á†·á„‰á…®-á„ˆá…©á„€á…¢á„€á…µ" tabindex="-1"><a class="header-anchor" href="#_4-list-insert-ordered-á„’á…¡á†·á„‰á…®-á„ˆá…©á„€á…¢á„€á…µ"><span>4) list_insert_ordered() í•¨ìˆ˜ ë½€ê°œê¸°</span></a></h3><ul><li>ë°›ëŠ” ì¸ì(ì´ 4ê°œì˜ ì¸ìë¥¼ ë°›ìŒ) <ul><li>list : ì‚½ì… í•  ë¦¬ìŠ¤íŠ¸ êµ¬ì¡°ì²´</li><li>list_elem : ì‚½ì… í•  ë¦¬ìŠ¤íŠ¸ ìš”ì†Œì˜ êµ¬ì¡°ì²´</li><li>list_less_func <ul><li>less í•¨ìˆ˜ êµ¬ì¡°ì²´ë¥¼ ë°›ì•„ì˜¨ë‹¤.</li><li>ì´ í•¨ìˆ˜ëŠ” ë‹¤ì‹œ 3ê°œì˜ ì¸ìë¥¼ ë°›ëŠ”ë‹¤. <ul><li>ì²«ë²ˆì§¸ list_elem(a)ì™€ ë‘ë²ˆì§¸ list_elem(b)ë¥¼ ë¹„êµí•˜ì—¬ aê°€ ì‘ìœ¼ë©´ true, bê°€ ì‘ìœ¼ë©´ falseë¥¼ ë°˜í™˜í•œë‹¤.</li><li>ë§ˆì§€ë§‰ ì¸ìëŠ” ë³´ì¡°ì¸ì(aux) ì´ë‹¤.</li></ul></li></ul></li><li>aux : ë³´ì¡° ì¸ì</li></ul></li><li>forë¬¸ìœ¼ë¡œ ë¦¬ìŠ¤íŠ¸ë¥¼ ìˆœíšŒ í•˜ë©° less í•¨ìˆ˜ë¥¼ ì‹¤í–‰ í•œë‹¤. <ul><li>ì´ë•Œ lessí•¨ìˆ˜ëŠ” ì‚½ì…í•  elemê°€ ë’¤(e)ë³´ë‹¤ ì‘ìœ¼ë©´ true(elem &lt; e)ë¥¼ ë¦¬í„´ í•œë‹¤.</li><li><code>for (e = list_begin (list); e != list_end (list); e = list_next (e)) if (less (elem, e, aux))//less í•¨ìˆ˜ : eë¥¼ í•˜ë‚˜ì”© ì˜®ê²¨ ê°€ë©´ì„œ elemê³¼ ê³„ì† ë¹„êµí•˜ë©° ë°˜ë³µ, break; //ì‚½ì…í•  elemê°€ ë’¤(e)ë³´ë‹¤ ì‘ìœ¼ë©´ true(elem &lt; e)</code></li></ul></li><li>ê·¸ë¦¬ê³  ë¦¬í„´ìœ¼ë¡œ list_insert()ë¥¼ ì‹¤í–‰ í•˜ì—¬ ë¦¬í„´ í•˜ëŠ”ë°, list_insert í•¨ìˆ˜ëŠ” ì²«ë²ˆì§¸ ì¸ì ìš”ì†Œ ì•ì— ë‘ë²ˆì§¸ ì¸ìë¥¼ ë„£ëŠ”ë‹¤.</li></ul><p>ğŸ’¡ ë”°ë¼ì„œ list_insert_orderedí•¨ìˆ˜ë¥¼ pushëŒ€ì‹  ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë©´ ì˜¤ë¦„ì°¨ìˆœì´ ë˜ê¸° ë•Œë¬¸ì— ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ë˜ë©´ì„œ listì— ë„£ë„ë¡ í•´ì•¼ í•œë‹¤.</p><h3 id="_5-less-á„ƒá…¢á„‰á…µá†«-á„‰á…¡á„‹á…­á†¼á„’á…¡á„‚á…³á†«-moreá„’á…¡á†·á„‰á…®-á„€á…®á„’á…§á†«" tabindex="-1"><a class="header-anchor" href="#_5-less-á„ƒá…¢á„‰á…µá†«-á„‰á…¡á„‹á…­á†¼á„’á…¡á„‚á…³á†«-moreá„’á…¡á†·á„‰á…®-á„€á…®á„’á…§á†«"><span>5) less ëŒ€ì‹  ì‚¬ìš©í•˜ëŠ” moreí•¨ìˆ˜ êµ¬í˜„</span></a></h3><ul><li>ìœ„ì— ë§í•œ ê²ƒ ì²˜ëŸ¼ ìš°ë¦° less í•¨ìˆ˜ì˜ ë°˜ëŒ€ë¡œ true/falseë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ë©´ ëœë‹¤.</li><li>í•´ë‹¹ í•¨ìˆ˜ëŠ” ë‚˜ì¤‘ì— ê³„ì†í•´ì„œ ì‚¬ìš©í•˜ê³  sortë¥¼ í• ë•Œë„ ì‚¬ìš©í•˜ë‹ˆ ì£¼ì˜ê¹Šê²Œ ë´ì•¼ í•œë‹¤.</li></ul><div class="language-c" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//thread.c</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/*ì•ì—ê°€ í¬ë©´ true!*/</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">bool</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">more</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> struct</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> list_elem </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> const</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> struct</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> list_elem </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">aux</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> list_entry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (a, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread, elem)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> -&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">priority</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            &gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> list_entry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (b, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread, elem)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> -&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h3 id="_6-list-push-back-á„…á…³á†¯-list-insert-ordered-á„…á…©-á„‰á…®á„Œá…¥á†¼-á„’á…¡á„€á…µ" tabindex="-1"><a class="header-anchor" href="#_6-list-push-back-á„…á…³á†¯-list-insert-ordered-á„…á…©-á„‰á…®á„Œá…¥á†¼-á„’á…¡á„€á…µ"><span>6) list_push_back()ë¥¼ list_insert_ordered() ë¡œ ìˆ˜ì • í•˜ê¸°</span></a></h3><ul><li>ìš°ë¦¬ê°€ ë°”ê¾¸ì–´ì•¼ í•  í•¨ìˆ˜ëŠ” ì´ 3ê°œì´ë‹¤. <ul><li>thread_sleep()</li><li>thread_unblock()</li><li>thread_yield()</li></ul></li></ul><h3 id="_7-á„‰á…µá†¯á„’á…¢á†¼-á„Œá…®á†¼á„‹á…µá†«-threadá„‹á…´-á„‹á…®á„‰á…¥á†«á„‰á…®á†«á„‹á…±á„€á…¡-á„‡á…¡á„á…±á„‚á…³á†«-á„á…¦á„‹á…µá„‰á…³" tabindex="-1"><a class="header-anchor" href="#_7-á„‰á…µá†¯á„’á…¢á†¼-á„Œá…®á†¼á„‹á…µá†«-threadá„‹á…´-á„‹á…®á„‰á…¥á†«á„‰á…®á†«á„‹á…±á„€á…¡-á„‡á…¡á„á…±á„‚á…³á†«-á„á…¦á„‹á…µá„‰á…³"><span>7) ì‹¤í–‰ ì¤‘ì¸ threadì˜ ìš°ì„ ìˆœìœ„ê°€ ë°”ë€ŒëŠ” ì¼€ì´ìŠ¤</span></a></h3><ul><li>ì‹¤í–‰ì¤‘ì¸ threadì˜ ìš°ì„ ìˆœìœ„ê°€ ë°”ë€ŒëŠ” ì¼€ì´ìŠ¤ëŠ” ë‘ê°€ì§€ ì´ë‹¤. <ul><li>thread_create()</li><li>thread_set_priority()</li></ul></li><li>ë”°ë¼ì„œ ìœ„ ê²½ìš° ì§„í–‰ì¤‘ì¸ ìŠ¤ë ˆë“œì˜ ìš°ì„ ìˆœìœ„ë¥¼ í˜„ì¬ ready_listì—ì„œ ê°€ì¥ í°(ë§¨ì•) threadì™€ ë¹„êµí•˜ì—¬ thread_yield()í•´ì£¼ë©´ ëœë‹¤.</li><li>ì´ ì¼€ì´ìŠ¤ëŠ” ì•ìœ¼ë¡œ ë” ìˆì„ ê²ƒ ê°™ìœ¼ë‹ˆ í•¨ìˆ˜ë¡œ ë§Œë“¤ì</li><li>í•œê°€ì§€ ì¶”ê°€ ì¡°ê±´ìœ¼ë¡œëŠ” â€˜í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ìŠ¤ë ˆë“œê°€ idle_threadê°€ ì•„ë‹ ì¡°ê±´ë„ ì¶”ê°€ í•˜ì˜€ë‹¤.</li></ul><div class="language-c" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//thread.c</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/*ì§€ê¸ˆ ì‹¤í–‰ì¤‘ì¸ ìŠ¤ë ˆë“œì˜ ìš°ì„ ìˆœìœ„ì™€ ready_list ë§¨ ì•ì— ìŠ¤ë ˆë“œìš°ì„ ìˆœìœ„ë¥¼ ë¹„êµí•˜ì—¬ y*/</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">thread_comp_ready</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">curr </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> thread_current</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> e </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">list_entry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">list_begin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">ready_list), </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread , elem)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> -&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">curr </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">priority</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> e </span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;&amp;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> thread_current</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">!=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> idle_thread){</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        thread_yield</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><ul><li>ìœ„ì™€ê°™ì´ ë§Œë“  í•¨ìˆ˜ë¥¼ ê°ê° ë„£ì–´ì£¼ë©´ ëœë‹¤.</li></ul><div class="language-c" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//thread.c</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">thread_set_priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> new_priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">curr </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> thread_current</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    curr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">priority</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new_priority;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    thread_comp_ready</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><div class="language-c" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//thread.c</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">tid_t</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">thread_create</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> char</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        thread_func </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">aux</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    /* Add to run queue. */</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    thread_unblock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (t);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    thread_comp_ready</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tid;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><ul><li>ê²°ê³¼</li></ul><figure><img src="`+p+`" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h2 id="_4-á„‹á…®á„‰á…¥á†«á„‰á…®á†«á„‹á…±-á„‰á…³á„á…¦á„Œá…²á†¯á„…á…µá†¼-priority-scheduling-2" tabindex="-1"><a class="header-anchor" href="#_4-á„‹á…®á„‰á…¥á†«á„‰á…®á†«á„‹á…±-á„‰á…³á„á…¦á„Œá…²á†¯á„…á…µá†¼-priority-scheduling-2"><span>4. ìš°ì„ ìˆœìœ„ ìŠ¤ì¼€ì¥´ë§(Priority Scheduling)_2</span></a></h2><h3 id="_1-á„†á…©á†¨á„‘á…­-1" tabindex="-1"><a class="header-anchor" href="#_1-á„†á…©á†¨á„‘á…­-1"><span>1) ëª©í‘œ</span></a></h3><ul><li>ì£¼ì–´ì§„ ë™ê¸°í™” ë„êµ¬ë¥¼ í™œìš©í•˜ì—¬ ìŠ¤ë ˆë“œë¥¼ ìŠ¤ì¼€ì¥´ë§í•˜ì</li></ul><h3 id="_2-á„ƒá…©á„€á…®" tabindex="-1"><a class="header-anchor" href="#_2-á„ƒá…©á„€á…®"><span>2) ë„êµ¬</span></a></h3><ul><li>Semaphore <ul><li>value : ê³µìœ ìì›ì˜ ê°œìˆ˜ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.</li><li>list waiters : ê³µìœ ìì›ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ëŒ€ê¸°í•˜ëŠ” ìŠ¤ë ˆë“œ ë¦¬ìŠ¤íŠ¸</li><li><code>struct semaphore { unsigned value; /* Current value. */ struct list waiters; /* ëŒ€ê¸° ì¤‘ì¸ ìŠ¤ë ˆë“œ ëª©ë¡. */ };</code></li></ul></li><li>Lock <ul><li>thread holder : í˜„ì¬ í•´ë‹¹ lockì„ ê°–ê³  ìˆëŠ” ìŠ¤ë ˆë“œ</li><li>semaphore</li><li><code>struct lock { struct thread *holder; struct semaphore semaphore; /* ì ‘ê·¼ì„ ì œì–´í•˜ëŠ” ë°”ì´ë„ˆë¦¬ ì„¸ë§ˆí¬ì–´. */ };</code></li></ul></li><li>Condition variable <ul><li>list waiters : Condition variableê°€ ë§Œì¡±í•˜ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” waiters ë¦¬ìŠ¤íŠ¸</li><li><code>struct condition { struct list waiters; /* List of waiting threads. */ };</code></li></ul></li></ul><h3 id="_3-á„†á…®á†«á„Œá…¦-á„’á…¢á„€á…§á†¯-á„‡á…¡á†¼á„‡á…¥á†¸-01-semaphore" tabindex="-1"><a class="header-anchor" href="#_3-á„†á…®á†«á„Œá…¦-á„’á…¢á„€á…§á†¯-á„‡á…¡á†¼á„‡á…¥á†¸-01-semaphore"><span>3) ë¬¸ì œ í•´ê²° ë°©ë²•_01_Semaphore</span></a></h3><ul><li>ê³µìœ ìì› í•˜ë‚˜ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ sema downë˜ì–´ waiters ë¦¬ìŠ¤íŠ¸ì— ìˆë‹¤ê³  ê°€ì •í•˜ì</li><li>ê³µìœ ìì›ì„ ì‚¬ìš©í•˜ë˜ ìŠ¤ë ˆë“œê°€ ì‚¬ìš©ì„ ë§ˆì¹˜ê³  sema upì„ í• ë•Œ ì–´ë–¤ ìŠ¤ë ˆë“œë¥¼ ë¨¼ì € ì‚¬ìš©í• ì§€ ê³ ë¯¼ í•´ì•¼ í•œë‹¤.</li><li>í•˜ì§€ë§Œ ìš°ë¦° ìœ„ ë¬¸ì œë¥¼ ì´ë¯¸ ê³ ë ¤ë¥¼ í–ˆë˜ ì ì´ ìˆë‹¤. (ì ìëŠ” ìŠ¤ë ˆë“œë¥¼ ê¹¨ìš¸ë•Œ)</li><li>ë™ì¼í•˜ê²Œ waiters ë¦¬ìŠ¤íŠ¸ì— ë„£ì„ë•Œ ì •ë ¬í•´ì„œ ë„£ê³ , Popí• ë•ŒëŠ” ë§¨ ì•ì— elemì„ popí•˜ë©´ ëœë‹¤. <ul><li>ì£¼ëª©í•  ì ì€ list_insert_ordered()ì‚¬ìš© ì‹œ more í•¨ìˆ˜ë¡œ ì¸ìë¥¼ â€˜ë™ì¼í•˜ê²Œâ€™ì‚¬ìš©í•œ ì ì´ë‹¤.</li></ul></li></ul><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//synch.c</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/*ë¦¬ìŠ¤íŠ¸ì— ë„£ì„ë•Œ ì •ë ¹ë˜ê²Œ ë„£ëŠ”ë‹¤.*/</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sema_down</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> semaphore </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">sema</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    enum</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> intr_level old_level;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ASSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (sema </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ASSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">intr_context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    old_level </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> intr_disable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    while</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">sema</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // list_push_back (&amp;sema-&gt;waiters, &amp;thread_current ()-&gt;elem);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        list_insert_ordered</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">sema</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">waiters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">thread_current</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ()-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">elem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, more, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        thread_block</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    sema</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">--</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    intr_set_level</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (old_level);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ì¶”ê°€ë¡œ popí• ë•Œ(sema_up)ëŠ” ê·¸ëƒ¥ ë¹¼ë©´ ë˜ì§€ë§Œ ë¹¼ê¸° ì „ ë¦¬ìŠ¤íŠ¸ì— ìˆë˜ ìƒíƒœì—ì„œ ìš°ì„ ìˆœìœ„ ê°’ì´ ë°”ë€ŒëŠ” ì¼€ì´ìŠ¤ê°€ ìˆê¸° ë•Œë¬¸ì— sortë¥¼ í•œë²ˆ í•´ì¤€ë‹¤. <ul><li>ë™ì¼í•˜ê²Œ more í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œ ì ì„ ì£¼ëª©</li><li>unblock() ì´í›„ unblockëœ ìŠ¤ë ˆë“œê°€ running ìŠ¤ë ˆë“œë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ì„ ìˆ˜ ìˆì–´ thread_comp_ready() ì‹¤í–‰ â†’ CPUì„ ì </li></ul></li></ul><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sema_up</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> semaphore </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">sema</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    enum</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> intr_level old_level;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ASSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (sema </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    old_level </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> intr_disable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">list_empty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">sema</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">waiters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        list_sort</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">sema</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">waiters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, more, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // ì†”íŠ¸ ì¶”ê°€í•œê±°</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        thread_unblock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">list_entry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">list_pop_front</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">sema</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">waiters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread, elem));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    sema</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    thread_comp_ready</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">              //ì‹¤í–‰ ë˜ê¸°ì „ ìŠ¤ìºì¥´ë§ì„ ìœ„í•´</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    intr_set_level</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (old_level);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-á„†á…®á†«á„Œá…¦-á„’á…¢á„€á…§á†¯-á„‡á…¡á†¼á„‡á…¥á†¸-02-lock" tabindex="-1"><a class="header-anchor" href="#_4-á„†á…®á†«á„Œá…¦-á„’á…¢á„€á…§á†¯-á„‡á…¡á†¼á„‡á…¥á†¸-02-lock"><span>4) ë¬¸ì œ í•´ê²° ë°©ë²•_02_Lock</span></a></h3><ul><li>lock_acquire í•¨ìˆ˜ì™€ lock_release í•¨ìˆ˜ëŠ” sema_up/downìœ¼ë¡œ ëë‚œë‹¤.</li><li>lockì€ semaphoreì™€ ë™ì¼í•˜ê²Œ ë™ì‘ í•˜ë¯€ë¡œ ë³„ë„ ì²˜ë¦¬ëŠ” ìš°ì„  í•„ìš” ì—†ë‹¤.</li></ul><h3 id="_5-á„†á…®á†«á„Œá…¦-á„’á…¢á„€á…§á†¯-á„‡á…¡á†¼á„‡á…¥á†¸-03-condition-variables" tabindex="-1"><a class="header-anchor" href="#_5-á„†á…®á†«á„Œá…¦-á„’á…¢á„€á…§á†¯-á„‡á…¡á†¼á„‡á…¥á†¸-03-condition-variables"><span>5) ë¬¸ì œ í•´ê²° ë°©ë²•_03_Condition variables</span></a></h3><ul><li>semaphoreì™€ ë°©ì‹ì€ ë™ì¼í•˜ë‚˜ ì°¨ì´ì ì´ í•˜ë‚˜ ìˆë‹¤.</li><li>condition variablesì˜ waitersëŠ” ì„¸ë§ˆí¬ì–´ë“¤ì˜ ë¦¬ìŠ¤íŠ¸ ì´ë‹¤. <ul><li>ì•„ë˜ ëŠ” cond_wait()ì— ìˆëŠ” list_push_back()ì´ë‹¤.</li></ul></li></ul><div class="language-c" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">list_push_back</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">cond</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">waiters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">waiter.elem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre></div><ul><li>ê¸°ì¡´ì— ì‚¬ìš©í•˜ë˜ í•¨ìˆ˜ì´ì§€ë§Œ elemë¥¼ ë„£ëŠ” ì¸ìë¥¼ ì£¼ëª©í•´ì„œ ë´ì•¼ í•œë‹¤. <ul><li>ìœ„ì— ë§í•œ ê²ƒ ì²˜ëŸ¼ ìš”ê¸°ì„œì˜ waiterëŠ” ì„¸ë§ˆí¬ì–´ì˜ elementì´ë‹¤.</li><li>ì´ë²ˆì—ëŠ” ì…ë ¥ë°›ëŠ” íŒŒë¼ë¯¸í„°ê°€ ìŠ¤ë ˆë“œê°€ ì•„ë‹ˆë¼ semaphore_elem.elemë¡œ ë“¤ì–´ì˜¤ê¸°ì— list_insert_ordered() í•¨ìˆ˜ì— ë“¤ì–´ê°ˆ more í•¨ìˆ˜ë¥¼ ìƒˆë¡­ê²Œ ë§Œë“¤ì–´ì•¼ í•œë‹¤.</li></ul></li></ul><div class="language-c" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//synch.c</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">bool</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sema_more</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> struct</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> list_elem </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> const</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> struct</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> list_elem </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">aux</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> semaphore_elem </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sa </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> list_entry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (a, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> semaphore_elem, elem);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> semaphore_elem </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sb </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> list_entry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (b, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> semaphore_elem, elem);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> list </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">waiter_sa </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">sa</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">semaphore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">waiters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> list </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">waiter_sb </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">sb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">semaphore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">waiters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> more</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">list_begin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(waiter_sa), </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">list_begin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(waiter_sb), </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><ul><li>ì´ì œ semaphore í•¨ìˆ˜ë“¤ê³¼ ê°™ì´ condí•¨ìˆ˜ë“¤ë„ ìˆ˜ì •í•˜ë©´ ëœë‹¤.</li></ul><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//synch.c</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cond_wait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> condition </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">cond</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> struct</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> lock </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> semaphore_elem waiter;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ASSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (cond </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ASSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (lock </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ASSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">intr_context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ());</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ASSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lock_held_by_current_thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (lock));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    sema_init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">waiter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">semaphore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // list_push_back (&amp;cond-&gt;waiters, &amp;waiter.elem);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    list_insert_ordered</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">cond</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">waiters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">waiter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">elem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> , sema_more, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    lock_release</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (lock);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    sema_down</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">waiter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">semaphore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    lock_acquire</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (lock);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>signal í•¨ìˆ˜ì—ì„œ sema_up ì „ ìš°ì„ ìˆœìœ„ê°€ ë°”ë€ŒëŠ” í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ê°€ ìˆì–´ sortë¥¼ í•œë²ˆ í•´ì¤€ë‹¤.</li></ul><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//synch.c</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cond_signal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> condition </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">cond</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> struct</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> lock </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">lock </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">UNUSED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> semaphore </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sema;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ASSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (cond </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ASSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (lock </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ASSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">intr_context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ());</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ASSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lock_held_by_current_thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (lock));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">list_empty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">cond</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">waiters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        list_sort</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">cond </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">waiters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, sema_more, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> //ì¶”ê°€í•œê±°</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        sema_up</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">list_entry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">list_pop_front</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">cond</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">waiters</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> semaphore_elem, elem)-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">semaphore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ê²°ê³¼</li></ul><figure><img src="`+r+'" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h2 id="_5-á„‹á…®á„‰á…¥á†«á„‰á…®á†«á„‹á…±-á„‰á…³á„á…¦á„Œá…²á†¯á„…á…µá†¼-priority-inversion-donation" tabindex="-1"><a class="header-anchor" href="#_5-á„‹á…®á„‰á…¥á†«á„‰á…®á†«á„‹á…±-á„‰á…³á„á…¦á„Œá…²á†¯á„…á…µá†¼-priority-inversion-donation"><span>5. ìš°ì„ ìˆœìœ„ ìŠ¤ì¼€ì¥´ë§(Priority Inversion)_donation</span></a></h2><h3 id="_1-á„†á…®á†«á„Œá…¦-á„†á…µá†¾-á„†á…©á†¨á„‘á…­" tabindex="-1"><a class="header-anchor" href="#_1-á„†á…®á†«á„Œá…¦-á„†á…µá†¾-á„†á…©á†¨á„‘á…­"><span>1) ë¬¸ì œ ë° ëª©í‘œ</span></a></h3><ul><li>ì—¬ëŸ¬ìŠ¤ë ˆë“œê°€ lockì„ ìš”ì²­í•˜ê³  ì ìœ í•˜ëŠ” ê³¼ì •ì—ì„œ Poriority inversionì´ ë°œìƒ</li><li>ì´ Poriority inversion ë°œìƒì„ ë§‰ê¸° ìœ„í•´ Priority donationì´ë¼ëŠ” ê°œë…ì„ ë„ì…í•˜ì—¬ ìŠ¤ë ˆë“œë“¤ì´ ìš°ì„ ìˆœìœ„ëŒ€ë¡œ ì‹¤í–‰ ë˜ë„ë¡ í•œë‹¤.</li></ul><h3 id="_2-poriority-inversion-á„ƒá…¢á„‹á…³á†¼á„‹á…³á†¯-á„‹á…±á„’á…¡á†«-á„ƒá…®á„€á…¡á„Œá…µ-á„á…¦á„‹á…µá„‰á…³" tabindex="-1"><a class="header-anchor" href="#_2-poriority-inversion-á„ƒá…¢á„‹á…³á†¼á„‹á…³á†¯-á„‹á…±á„’á…¡á†«-á„ƒá…®á„€á…¡á„Œá…µ-á„á…¦á„‹á…µá„‰á…³"><span>2) Poriority inversion ëŒ€ì‘ì„ ìœ„í•œ ë‘ê°€ì§€ ì¼€ì´ìŠ¤</span></a></h3><ul><li>Multiple donation</li><li>Nested donation</li></ul><h3 id="_3-multiple-donation" tabindex="-1"><a class="header-anchor" href="#_3-multiple-donation"><span>3) Multiple donation</span></a></h3><ul><li>í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œê°€ ê°–ê³  ìˆëŠ” lockì— ëŒ€í•´ì„œ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ìš”ì²­í•˜ì—¬ Multiple donationì´ ì¼ì–´ë‚œ ìƒí™©ì´ë‹¤.</li></ul><figure><img src="'+d+'" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h3 id="_4-nested-donation" tabindex="-1"><a class="header-anchor" href="#_4-nested-donation"><span>4) Nested donation</span></a></h3><ul><li>HìŠ¤ë ˆë“œê°€ aë½ì„ ì–»ìœ¼ë ¤ê³  í•˜ì§€ë§Œ aë½ì€ MìŠ¤ë ˆë“œê°€ ê°–ê³  ìˆê³ , ì´ MìŠ¤ë ˆë“œëŠ” bë½ì„ ì–»ìœ¼ë ¤ê³  í•œë‹¤.</li><li>ì´ì™€ê°™ì€ ê³¼ì •ì´ ë‹¨ê³„ì ìœ¼ë¡œ ì¼ì–´ë‚ ë•Œì˜ ë¬¸ì œ ì ì´ë‹¤.</li></ul><figure><img src="'+A+`" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><p>ì, ë‘ ê²½ìš°ë¥¼ ëª¨ë‘ í•´ê²°í•´ ë³´ì</p><h3 id="_5-thread-á„€á…®á„Œá…©á„á…¦-á„‰á…®á„Œá…¥á†¼" tabindex="-1"><a class="header-anchor" href="#_5-thread-á„€á…®á„Œá…©á„á…¦-á„‰á…®á„Œá…¥á†¼"><span>5) Thread êµ¬ì¡°ì²´ ìˆ˜ì •</span></a></h3><ul><li>init_priority : ê³ ìœ ì˜ priority ê°’ì„ ì €ì¥í•´ ë‘”ë‹¤.</li><li>lock wait_lock : ë‚´ê°€ ì›í•´ì„œ ê¸°ë‹¤ë¦¬ê³  ìˆëŠ” lock(ì´ lockì´ release ë˜ê¸°ë¥¼ ê¸°ë‹¤ë¦°ë‹¤.)</li><li>list donations : ë‚˜ì—ê²Œ priorityë¥¼ donation í•´ì¤€ ìŠ¤ë ˆë“œì˜ ë¦¬ìŠ¤íŠ¸</li><li>list_elem donations_elem : ì´ ë¦¬ìŠ¤íŠ¸ë¥¼ ê´€ë¦¬ í•˜ê¸° ìœ„í•œ element</li></ul><div class="language-c" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//thread.h</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    /*donation ê´€ë ¨*/</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> init_priority;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> lock </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">wait_lock;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> list dona;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> list_elem dona_elem;</span></span></code></pre></div><h3 id="_6-init-thread-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼" tabindex="-1"><a class="header-anchor" href="#_6-init-thread-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼"><span>6) init_thread í•¨ìˆ˜ ìˆ˜ì •</span></a></h3><ul><li>ìë£Œêµ¬ì¡° ì´ˆê¸°í™”</li></ul><div class="language-c" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//thread.c</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">init_thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> thread </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> const</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> char</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    ...</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    /*priority donation ê´€ë ¨ ìë£Œêµ¬ì¡° ì´ˆê¸°í™”*/</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">init_priority</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> priority;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">wait_lock</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    list_init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dona</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h3 id="_7-lock-acquire-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼" tabindex="-1"><a class="header-anchor" href="#_7-lock-acquire-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼"><span>7) lock_acquire í•¨ìˆ˜ ìˆ˜ì •</span></a></h3><ul><li>í°ê·¸ë¦¼ì„ ë¨¼ì € ì„¤ëª… í›„ ì½”ë“œë¥¼ ìˆ˜ì • í•˜ê² ë‹¤. <ul><li>ìŠ¤ë ˆë“œê°€ lockì´ í•„ìš”í•˜ë©´ í•´ë‹¹ lockìœ¼ë¡œ ìš”ì²­ì„ í•œë‹¤. ì´ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ì´ë©°, ëˆ„êµ°ê°€ ì„ ì í•˜ê³  ìˆëŠ” ê²½ìš°ì™€ ì•„ë‹Œ ê²½ìš°ë¥¼ ë‚˜ëˆŒ ìˆ˜ ìˆê² ë‹¤.</li><li>ë„ë„¤ì´ì…˜ì€ lockì„ ì ìœ í•˜ê³  ìˆì„ë•Œë§Œ í•„ìš”í•˜ê¸° ë•Œë¬¸ì´ë‹¤.</li></ul></li></ul><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//synch.c</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lock_acquire</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> lock </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ASSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (lock </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ASSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">intr_context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ());</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ASSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lock_held_by_current_thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (lock));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">t </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> thread_current</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    /*done ì‹œì‘*/</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">lock </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">holder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">){</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                //lockì˜ holderê°€ ìˆëŠ” ê²½ìš°</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        t </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">wait_lock</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> lock;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            //í•´ë‹¹ lockì„ ìŠ¤ë ˆë“œì˜ wait_lockìœ¼ë¡œ ì €ì¥</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //í•´ë‹¹ lockì„ ê°–ê³  ìˆë˜ ìŠ¤ë˜ë“œì˜ ë„ë„¤ì´ì…˜ ë¦¬ìŠ¤íŠ¸ì— tìŠ¤ë ˆë“œë¥¼ ë„£ëŠ”ë‹¤.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        list_insert_ordered</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">holder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dona</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dona_elem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, more, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        dona_priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                //ë„ë„¤ì´ì…˜ ì‹œì‘!</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    sema_down</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">semaphore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    t </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">wait_lock</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">holder</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-dona-priority-á„’á…¡á†·á„‰á…®-á„€á…®á„’á…§á†«" tabindex="-1"><a class="header-anchor" href="#_8-dona-priority-á„’á…¡á†·á„‰á…®-á„€á…®á„’á…§á†«"><span>8) dona_priority í•¨ìˆ˜ êµ¬í˜„</span></a></h3><ul><li>ì‹¤ì§ˆì ìœ¼ë¡œ ë‚´ê°€ ê°€ì§€ë ¤ê³  í•˜ëŠ” Lockì„ ê°–ê³  ìˆëŠ” ìŠ¤ë ˆë“œì—ê²Œ ë„ë„¤ì´ì…˜ì„ í•œë‹¤.</li><li>ìµœëŒ€ ê¹Šì´ëŠ” 8ê°œë¡œ ì œí•œí•˜ì—¬ ì£¼ì—ˆë‹¤.</li></ul><div class="language-c" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//thread.c</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dona_priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cur_t</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> thread_current</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> depth </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; depth </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; depth</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">cur_t </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">wait_lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            break</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">t </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> cur_t </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">wait_lock</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">holder;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        t </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">priority</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> cur_t </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">        cur_t</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> t;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><ul><li>ìš”ê¸°ê¹Œì§€ê°€ priority donationì´ ì™„ë£Œ ëœë‹¤.</li></ul><h3 id="_9-lock-release-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼" tabindex="-1"><a class="header-anchor" href="#_9-lock-release-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼"><span>9) lock_release í•¨ìˆ˜ ìˆ˜ì •</span></a></h3><ul><li>ìŠ¤ë ˆë“œê°€ priorityë¥¼ ì–‘ë„ë§ê³  critical sectionì„ ëë‚´ë©´ lockì„ ë°˜í™˜ í•˜ê²Œ ëœë‹¤.</li><li>ì´ë•Œ ê³¼ì •ì„ í•¨ìˆ˜ë¡œ ì •ë¦¬í•œë‹¤.</li><li>sema_upì„ í•˜ì—¬ lockì˜ ì ìœ ë¥¼ ë°˜í™˜ í•˜ê¸° ì „ì— í˜„ì¬ ë‚˜ì˜ lockì„ ì›í•˜ëŠ” ìŠ¤ë ˆë“œë“¤ì´ ë‚˜ì—ê²Œ priorityë¥¼ ë„ë„¤ì´ì…˜ í•´ì¤¬ì„ ê²ƒì´ë‹¤.</li><li>ì´ ìŠ¤ë ˆë“œë“¤ì´ dona_listì— ìˆì„ ê²ƒì´ê³  ì´ê²ƒë“¤ì„ ì‚­ì œ í•´ì•¼ í•œë‹¤.</li></ul><div class="language-c" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//synch.c</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lock_release</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> lock </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ASSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (lock </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ASSERT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lock_held_by_current_thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (lock));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">holder</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    remove_with_lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(lock);</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">       //donaion ë¦¬ìŠ¤íŠ¸ì—ì„œ ë‚´ ë½ì„ ì›í•˜ëŠ” ìŠ¤ë ˆë“œ ì‚­ì œ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    refresh_priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">           //priority ë˜ëŒë¦¬ê¸°</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    sema_up</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">semaphore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><ul><li>lock_release í•¨ìˆ˜ ìˆ˜ì • <ul><li>í•´ë‹¹ ë¦¬ìŠ¤íŠ¸ë¥¼ ëŒë©´ì„œ ë‚´ lockê³¼ ë¦¬ìŠ¤íŠ¸ì— ë‚´ lockì„ ì›í•˜ëŠ” ìŠ¤ë ˆë“œë“¤ì„ ëª¨ë‘ ì‚­ì œ í•œë‹¤.</li></ul></li></ul><div class="language-c" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//thread.c</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">remove_with_lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> lock </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">t </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> thread_current</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> list_elem </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">temp;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (temp </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">list_begin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dona</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">list_end</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dona</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">!=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> temp; temp </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> list_next</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (temp)){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">t_t</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> list_entry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(temp, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread, dona_elem);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">t_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">wait_lock</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ==</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> lock){</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            list_remove</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">t_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dona_elem</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><h3 id="_10-refresh-priority-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼" tabindex="-1"><a class="header-anchor" href="#_10-refresh-priority-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼"><span>10) Refresh_priority í•¨ìˆ˜ ìˆ˜ì •</span></a></h3><ul><li>ì¤‘ìš” í¬ì¸íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. <ul><li>lockì´ releaseëœ ìŠ¤ë ˆë“œëŠ” ì›ë˜ priorityë¥¼ ë‹¤ì‹œ ì €ì¥ í•œë‹¤.</li><li>ë§Œì•½ dona ë¦¬ìŠ¤íŠ¸ê°€ ë¹„ì–´ìˆì§€ ì•Šë‹¤ë©´, ìš°ì„  í•´ë‹¹ ë¦¬ìŠ¤íŠ¸ë¥¼ sort í•´ì¤€ë‹¤. <ul><li>ë¦¬ìŠ¤íŠ¸ì— ìˆìœ¼ë©´ì„œ priorityê°€ ë³€ê²½ëœ ì¼€ì´ìŠ¤ê°€ ìˆê¸° ë•Œë¬¸ì´ë‹¤.</li></ul></li><li>remove ë˜ì§€ ì•Šì€ ë‚¨ì€ ìŠ¤ë ˆë“œì—ì„œ priorityê°€ ê°€ì¥ í° (ë§¨ ì•ì— ë¦¬ìŠ¤íŠ¸) ìŠ¤ë ˆë“œì™€ í˜„ì¬ ìŠ¤ë ˆë“œì˜ priorityë¥¼ ë¹„êµí•˜ì—¬ í°ê²ƒì„ í˜„ì¬ ìŠ¤ë ˆë“œì— í• ë‹¹í•œë‹¤.</li></ul></li></ul><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//thread.c</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">refresh_priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">t </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> thread_current</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //í˜„ì¬ ìŠ¤ë ˆë“œì˜ ìš°ì„ ìˆœìœ„ë¥¼ ê¸°ë¶€ë°›ê¸° ì „ì˜ ìš°ì„ ìˆœìœ„ë¡œ ë³€ê²½</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    t </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">priority</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> t </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">init_priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">list_empty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dona</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)){</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        list_sort</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dona</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, more, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">temp </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> list_entry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">list_front</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&amp;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dona</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread, dona_elem);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">temp </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">priority</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">priority</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> temp </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-thread-set-priority-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼" tabindex="-1"><a class="header-anchor" href="#_11-thread-set-priority-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼"><span>11) thread_set_priority í•¨ìˆ˜ ìˆ˜ì •</span></a></h3><ul><li>í•œ ê°€ì§€ ì¶”ê°€ë¡œ ê³ ë ¤í•´ì•¼ í• ì ì´ ìˆë‹¤.</li><li>thread_set_priorityí•¨ìˆ˜ì—ì„œëŠ” í˜„ì¬ ìŠ¤ë ˆë“œì˜ priorityê°’ì„ ê°’ìê¸° ë³€ê²½ í•  ê²½ìš°ê°€ ìˆë‹¤. <ul><li>ì´ë•Œ priorityëŠ” init_pritorityë¥¼ ë§í•œë‹¤.</li></ul></li><li>ì´ë•Œì—ëŠ” yield ì „ì— refresh_priority ë¥¼ í•œë²ˆ í•´ì¤˜ì•¼ í•œë‹¤.</li></ul><div class="language-c" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//thread.c</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">thread_set_priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> new_priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    struct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> thread </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">curr </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> thread_current</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    curr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">init_priority</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new_priority;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    refresh_priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    thread_comp_ready</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><ul><li>ê²°ê³¼</li></ul><figure><img src="`+g+'" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h2 id="á„‡á…¢á„‹á…®á†«á„Œá…¥á†·-á„’á…¬á„€á…©" tabindex="-1"><a class="header-anchor" href="#á„‡á…¢á„‹á…®á†«á„Œá…¥á†·-á„’á…¬á„€á…©"><span>ë°°ìš´ì , íšŒê³ </span></a></h2><ul><li><p>ë§¤ìš° í˜ë“¤ì—ˆë‹¤. ê·¸ë˜ë„ ë§ì´ ë”°ë¼ê°”ë‹¤. ë” ì—´ì‹¬íˆ í•´ì•¼ í•œë‹¤.</p></li><li><p>ì˜ì–´ê°€ ë§ì´ ë¬¸ì œì´ë‹¤. ë‹¨ì–´ ê³µë¶€ ê¾¸ì¤€íˆ í•˜ì.</p></li><li><p>ì‚¬ê³ ê°€ ëŠë¦¬ë©´ ì‹œê°„ì„ ë” ë“¤ì—¬ì„œ ë³´ì.</p></li></ul>',129))])}const u=a(y,[["render",c],["__file","WEEK08-PintOS_Project1_Threads.html.vue"]]),D=JSON.parse(`{"path":"/dev/SW%EC%82%AC%EA%B4%80%ED%95%99%EA%B5%90%EC%A0%95%EA%B8%80/WEEK08-PintOS_Project1_Threads.html","title":"WEEK08-PintOS_Project1_Threads","lang":"ko-KR","frontmatter":{"title":"WEEK08-PintOS_Project1_Threads","icon":"pen-to-square","date":"2022-11-17T00:00:00.000Z","category":["Dev"],"tags":["SWì‚¬ê´€í•™êµì •ê¸€","Develop"],"description":"SWì‚¬ê´€í•™êµ ì •ê¸€ 5ê¸° 8ì£¼ì°¨ íšŒê³ ","head":[["meta",{"property":"og:url","content":"https://www.levih.me/dev/SW%EC%82%AC%EA%B4%80%ED%95%99%EA%B5%90%EC%A0%95%EA%B8%80/WEEK08-PintOS_Project1_Threads.html"}],["meta",{"property":"og:site_name","content":"It's Blog"}],["meta",{"property":"og:title","content":"WEEK08-PintOS_Project1_Threads"}],["meta",{"property":"og:description","content":"SWì‚¬ê´€í•™êµ ì •ê¸€ 5ê¸° 8ì£¼ì°¨ íšŒê³ "}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2024-09-04T15:24:43.000Z"}],["meta",{"property":"article:tag","content":"SWì‚¬ê´€í•™êµì •ê¸€"}],["meta",{"property":"article:tag","content":"Develop"}],["meta",{"property":"article:published_time","content":"2022-11-17T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-09-04T15:24:43.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"WEEK08-PintOS_Project1_Threads\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-11-17T00:00:00.000Z\\",\\"dateModified\\":\\"2024-09-04T15:24:43.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Levi\\",\\"url\\":\\"https://levih.me\\"}]}"]]},"headers":[{"level":2,"title":"1. PintOS ë™ê¸°í™”ì— ê´€í•œ ì£¼ìš” ìš©ì–´ ì •ë¦¬","slug":"_1-pintos-á„ƒá…©á†¼á„€á…µá„’á…ªá„‹á…¦-á„€á…ªá†«á„’á…¡á†«-á„Œá…®á„‹á…­-á„‹á…­á†¼á„‹á…¥-á„Œá…¥á†¼á„…á…µ","link":"#_1-pintos-á„ƒá…©á†¼á„€á…µá„’á…ªá„‹á…¦-á„€á…ªá†«á„’á…¡á†«-á„Œá…®á„‹á…­-á„‹á…­á†¼á„‹á…¥-á„Œá…¥á†¼á„…á…µ","children":[{"level":3,"title":"1) ìŠ¤ë ˆë“œ(Thread)","slug":"_1-á„‰á…³á„…á…¦á„ƒá…³-thread","link":"#_1-á„‰á…³á„…á…¦á„ƒá…³-thread","children":[]},{"level":3,"title":"2) ì¸í„°ëŸ½íŠ¸ì˜ ë¹„í™œì„±í™”(Disabling Interrupts)","slug":"_2-á„‹á…µá†«á„á…¥á„…á…¥á†¸á„á…³á„‹á…´-á„‡á…µá„’á…ªá†¯á„‰á…¥á†¼á„’á…ª-disabling-interrupts","link":"#_2-á„‹á…µá†«á„á…¥á„…á…¥á†¸á„á…³á„‹á…´-á„‡á…µá„’á…ªá†¯á„‰á…¥á†¼á„’á…ª-disabling-interrupts","children":[]},{"level":3,"title":"3) ì„¸ë§ˆí¬ì–´(Semaphores)","slug":"_3-á„‰á…¦á„†á…¡á„‘á…©á„‹á…¥-semaphores","link":"#_3-á„‰á…¦á„†á…¡á„‘á…©á„‹á…¥-semaphores","children":[]},{"level":3,"title":"4) Locks","slug":"_4-locks","link":"#_4-locks","children":[]},{"level":3,"title":"5) Monitors","slug":"_5-monitors","link":"#_5-monitors","children":[]}]},{"level":2,"title":"2. ì•ŒëŒì‹œê³„ êµ¬í˜„","slug":"_2-á„‹á…¡á†¯á„…á…¡á†·á„‰á…µá„€á…¨-á„€á…®á„’á…§á†«","link":"#_2-á„‹á…¡á†¯á„…á…¡á†·á„‰á…µá„€á…¨-á„€á…®á„’á…§á†«","children":[{"level":3,"title":"1) ëª©í‘œ","slug":"_1-á„†á…©á†¨á„‘á…­","link":"#_1-á„†á…©á†¨á„‘á…­","children":[]},{"level":3,"title":"2) ë°©ë²•","slug":"_2-á„‡á…¡á†¼á„‡á…¥á†¸","link":"#_2-á„‡á…¡á†¼á„‡á…¥á†¸","children":[]},{"level":3,"title":"3) sleep_listë¥¼ ë§Œë“¤ì–´ ì ìëŠ” threadë¥¼ ì €ì¥í•˜ì","slug":"_3-sleep-listá„…á…³á†¯-á„†á…¡á†«á„ƒá…³á†¯á„‹á…¥-á„Œá…¡á†·á„Œá…¡á„‚á…³á†«-threadá„…á…³á†¯-á„Œá…¥á„Œá…¡á†¼á„’á…¡á„Œá…¡","link":"#_3-sleep-listá„…á…³á†¯-á„†á…¡á†«á„ƒá…³á†¯á„‹á…¥-á„Œá…¡á†·á„Œá…¡á„‚á…³á†«-threadá„…á…³á†¯-á„Œá…¥á„Œá…¡á†¼á„’á…¡á„Œá…¡","children":[]},{"level":3,"title":"4) sleep_listì— ë„£ê¸° ì „ thread êµ¬ì¡°ì²´ì— ì¼ì–´ë‚  ì‹œê°„ì„ ê¸°ë¡","slug":"_4-sleep-listá„‹á…¦-á„‚á…¥á‡‚á„€á…µ-á„Œá…¥á†«-thread-á„€á…®á„Œá…©á„á…¦á„‹á…¦-á„‹á…µá†¯á„‹á…¥á„‚á…¡á†¯-á„‰á…µá„€á…¡á†«á„‹á…³á†¯-á„€á…µá„…á…©á†¨","link":"#_4-sleep-listá„‹á…¦-á„‚á…¥á‡‚á„€á…µ-á„Œá…¥á†«-thread-á„€á…®á„Œá…©á„á…¦á„‹á…¦-á„‹á…µá†¯á„‹á…¥á„‚á…¡á†¯-á„‰á…µá„€á…¡á†«á„‹á…³á†¯-á„€á…µá„…á…©á†¨","children":[]},{"level":3,"title":"5) ì¼ì–´ë‚  ì‹œê°„ì€ ì–´ë–»ê²Œ, ì–´ë””ì„œ ë„£ì–´ì¤„ê¹Œ?","slug":"_5-á„‹á…µá†¯á„‹á…¥á„‚á…¡á†¯-á„‰á…µá„€á…¡á†«á„‹á…³á†«-á„‹á…¥á„„á…¥á‡‚á„€á…¦-á„‹á…¥á„ƒá…µá„‰á…¥-á„‚á…¥á‡‚á„‹á…¥á„Œá…®á†¯á„á…¡","link":"#_5-á„‹á…µá†¯á„‹á…¥á„‚á…¡á†¯-á„‰á…µá„€á…¡á†«á„‹á…³á†«-á„‹á…¥á„„á…¥á‡‚á„€á…¦-á„‹á…¥á„ƒá…µá„‰á…¥-á„‚á…¥á‡‚á„‹á…¥á„Œá…®á†¯á„á…¡","children":[]},{"level":3,"title":"6) ê¹¨ìš¸ë•ŒëŠ” ì–´ë–»ê²Œ ê¹¨ìš¸ê¹Œ?","slug":"_6-á„á…¢á„‹á…®á†¯á„„á…¢á„‚á…³á†«-á„‹á…¥á„„á…¥á‡‚á„€á…¦-á„á…¢á„‹á…®á†¯á„á…¡","link":"#_6-á„á…¢á„‹á…®á†¯á„„á…¢á„‚á…³á†«-á„‹á…¥á„„á…¥á‡‚á„€á…¦-á„á…¢á„‹á…®á†¯á„á…¡","children":[]}]},{"level":2,"title":"3. ìš°ì„ ìˆœìœ„ ìŠ¤ì¼€ì¥´ë§(Priority Scheduling)_1","slug":"_3-á„‹á…®á„‰á…¥á†«á„‰á…®á†«á„‹á…±-á„‰á…³á„á…¦á„Œá…²á†¯á„…á…µá†¼-priority-scheduling-1","link":"#_3-á„‹á…®á„‰á…¥á†«á„‰á…®á†«á„‹á…±-á„‰á…³á„á…¦á„Œá…²á†¯á„…á…µá†¼-priority-scheduling-1","children":[{"level":3,"title":"1) ë¬¸ì œì ","slug":"_1-á„†á…®á†«á„Œá…¦á„Œá…¥á†·","link":"#_1-á„†á…®á†«á„Œá…¦á„Œá…¥á†·","children":[]},{"level":3,"title":"2) ëª©í‘œ","slug":"_2-á„†á…©á†¨á„‘á…­","link":"#_2-á„†á…©á†¨á„‘á…­","children":[]},{"level":3,"title":"3) ë°©ë²•","slug":"_3-á„‡á…¡á†¼á„‡á…¥á†¸","link":"#_3-á„‡á…¡á†¼á„‡á…¥á†¸","children":[]},{"level":3,"title":"4) list_insert_ordered() í•¨ìˆ˜ ë½€ê°œê¸°","slug":"_4-list-insert-ordered-á„’á…¡á†·á„‰á…®-á„ˆá…©á„€á…¢á„€á…µ","link":"#_4-list-insert-ordered-á„’á…¡á†·á„‰á…®-á„ˆá…©á„€á…¢á„€á…µ","children":[]},{"level":3,"title":"5) less ëŒ€ì‹  ì‚¬ìš©í•˜ëŠ” moreí•¨ìˆ˜ êµ¬í˜„","slug":"_5-less-á„ƒá…¢á„‰á…µá†«-á„‰á…¡á„‹á…­á†¼á„’á…¡á„‚á…³á†«-moreá„’á…¡á†·á„‰á…®-á„€á…®á„’á…§á†«","link":"#_5-less-á„ƒá…¢á„‰á…µá†«-á„‰á…¡á„‹á…­á†¼á„’á…¡á„‚á…³á†«-moreá„’á…¡á†·á„‰á…®-á„€á…®á„’á…§á†«","children":[]},{"level":3,"title":"6) list_push_back()ë¥¼ list_insert_ordered() ë¡œ ìˆ˜ì • í•˜ê¸°","slug":"_6-list-push-back-á„…á…³á†¯-list-insert-ordered-á„…á…©-á„‰á…®á„Œá…¥á†¼-á„’á…¡á„€á…µ","link":"#_6-list-push-back-á„…á…³á†¯-list-insert-ordered-á„…á…©-á„‰á…®á„Œá…¥á†¼-á„’á…¡á„€á…µ","children":[]},{"level":3,"title":"7) ì‹¤í–‰ ì¤‘ì¸ threadì˜ ìš°ì„ ìˆœìœ„ê°€ ë°”ë€ŒëŠ” ì¼€ì´ìŠ¤","slug":"_7-á„‰á…µá†¯á„’á…¢á†¼-á„Œá…®á†¼á„‹á…µá†«-threadá„‹á…´-á„‹á…®á„‰á…¥á†«á„‰á…®á†«á„‹á…±á„€á…¡-á„‡á…¡á„á…±á„‚á…³á†«-á„á…¦á„‹á…µá„‰á…³","link":"#_7-á„‰á…µá†¯á„’á…¢á†¼-á„Œá…®á†¼á„‹á…µá†«-threadá„‹á…´-á„‹á…®á„‰á…¥á†«á„‰á…®á†«á„‹á…±á„€á…¡-á„‡á…¡á„á…±á„‚á…³á†«-á„á…¦á„‹á…µá„‰á…³","children":[]}]},{"level":2,"title":"4. ìš°ì„ ìˆœìœ„ ìŠ¤ì¼€ì¥´ë§(Priority Scheduling)_2","slug":"_4-á„‹á…®á„‰á…¥á†«á„‰á…®á†«á„‹á…±-á„‰á…³á„á…¦á„Œá…²á†¯á„…á…µá†¼-priority-scheduling-2","link":"#_4-á„‹á…®á„‰á…¥á†«á„‰á…®á†«á„‹á…±-á„‰á…³á„á…¦á„Œá…²á†¯á„…á…µá†¼-priority-scheduling-2","children":[{"level":3,"title":"1) ëª©í‘œ","slug":"_1-á„†á…©á†¨á„‘á…­-1","link":"#_1-á„†á…©á†¨á„‘á…­-1","children":[]},{"level":3,"title":"2) ë„êµ¬","slug":"_2-á„ƒá…©á„€á…®","link":"#_2-á„ƒá…©á„€á…®","children":[]},{"level":3,"title":"3) ë¬¸ì œ í•´ê²° ë°©ë²•_01_Semaphore","slug":"_3-á„†á…®á†«á„Œá…¦-á„’á…¢á„€á…§á†¯-á„‡á…¡á†¼á„‡á…¥á†¸-01-semaphore","link":"#_3-á„†á…®á†«á„Œá…¦-á„’á…¢á„€á…§á†¯-á„‡á…¡á†¼á„‡á…¥á†¸-01-semaphore","children":[]},{"level":3,"title":"4) ë¬¸ì œ í•´ê²° ë°©ë²•_02_Lock","slug":"_4-á„†á…®á†«á„Œá…¦-á„’á…¢á„€á…§á†¯-á„‡á…¡á†¼á„‡á…¥á†¸-02-lock","link":"#_4-á„†á…®á†«á„Œá…¦-á„’á…¢á„€á…§á†¯-á„‡á…¡á†¼á„‡á…¥á†¸-02-lock","children":[]},{"level":3,"title":"5) ë¬¸ì œ í•´ê²° ë°©ë²•_03_Condition variables","slug":"_5-á„†á…®á†«á„Œá…¦-á„’á…¢á„€á…§á†¯-á„‡á…¡á†¼á„‡á…¥á†¸-03-condition-variables","link":"#_5-á„†á…®á†«á„Œá…¦-á„’á…¢á„€á…§á†¯-á„‡á…¡á†¼á„‡á…¥á†¸-03-condition-variables","children":[]}]},{"level":2,"title":"5. ìš°ì„ ìˆœìœ„ ìŠ¤ì¼€ì¥´ë§(Priority Inversion)_donation","slug":"_5-á„‹á…®á„‰á…¥á†«á„‰á…®á†«á„‹á…±-á„‰á…³á„á…¦á„Œá…²á†¯á„…á…µá†¼-priority-inversion-donation","link":"#_5-á„‹á…®á„‰á…¥á†«á„‰á…®á†«á„‹á…±-á„‰á…³á„á…¦á„Œá…²á†¯á„…á…µá†¼-priority-inversion-donation","children":[{"level":3,"title":"1) ë¬¸ì œ ë° ëª©í‘œ","slug":"_1-á„†á…®á†«á„Œá…¦-á„†á…µá†¾-á„†á…©á†¨á„‘á…­","link":"#_1-á„†á…®á†«á„Œá…¦-á„†á…µá†¾-á„†á…©á†¨á„‘á…­","children":[]},{"level":3,"title":"2) Poriority inversion ëŒ€ì‘ì„ ìœ„í•œ ë‘ê°€ì§€ ì¼€ì´ìŠ¤","slug":"_2-poriority-inversion-á„ƒá…¢á„‹á…³á†¼á„‹á…³á†¯-á„‹á…±á„’á…¡á†«-á„ƒá…®á„€á…¡á„Œá…µ-á„á…¦á„‹á…µá„‰á…³","link":"#_2-poriority-inversion-á„ƒá…¢á„‹á…³á†¼á„‹á…³á†¯-á„‹á…±á„’á…¡á†«-á„ƒá…®á„€á…¡á„Œá…µ-á„á…¦á„‹á…µá„‰á…³","children":[]},{"level":3,"title":"3) Multiple donation","slug":"_3-multiple-donation","link":"#_3-multiple-donation","children":[]},{"level":3,"title":"4) Nested donation","slug":"_4-nested-donation","link":"#_4-nested-donation","children":[]},{"level":3,"title":"5) Thread êµ¬ì¡°ì²´ ìˆ˜ì •","slug":"_5-thread-á„€á…®á„Œá…©á„á…¦-á„‰á…®á„Œá…¥á†¼","link":"#_5-thread-á„€á…®á„Œá…©á„á…¦-á„‰á…®á„Œá…¥á†¼","children":[]},{"level":3,"title":"6) init_thread í•¨ìˆ˜ ìˆ˜ì •","slug":"_6-init-thread-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼","link":"#_6-init-thread-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼","children":[]},{"level":3,"title":"7) lock_acquire í•¨ìˆ˜ ìˆ˜ì •","slug":"_7-lock-acquire-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼","link":"#_7-lock-acquire-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼","children":[]},{"level":3,"title":"8) dona_priority í•¨ìˆ˜ êµ¬í˜„","slug":"_8-dona-priority-á„’á…¡á†·á„‰á…®-á„€á…®á„’á…§á†«","link":"#_8-dona-priority-á„’á…¡á†·á„‰á…®-á„€á…®á„’á…§á†«","children":[]},{"level":3,"title":"9) lock_release í•¨ìˆ˜ ìˆ˜ì •","slug":"_9-lock-release-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼","link":"#_9-lock-release-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼","children":[]},{"level":3,"title":"10) Refresh_priority í•¨ìˆ˜ ìˆ˜ì •","slug":"_10-refresh-priority-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼","link":"#_10-refresh-priority-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼","children":[]},{"level":3,"title":"11) thread_set_priority í•¨ìˆ˜ ìˆ˜ì •","slug":"_11-thread-set-priority-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼","link":"#_11-thread-set-priority-á„’á…¡á†·á„‰á…®-á„‰á…®á„Œá…¥á†¼","children":[]}]},{"level":2,"title":"ë°°ìš´ì , íšŒê³ ","slug":"á„‡á…¢á„‹á…®á†«á„Œá…¥á†·-á„’á…¬á„€á…©","link":"#á„‡á…¢á„‹á…®á†«á„Œá…¥á†·-á„’á…¬á„€á…©","children":[]}],"git":{"createdTime":1723826567000,"updatedTime":1725463483000,"contributors":[{"name":"kyu91","username":"kyu91","email":"hongsk5689@gmail.com","commits":4,"url":"https://github.com/kyu91"},{"name":"ëŒ€ì›…í«","username":"ëŒ€ì›…í«","email":"hongsk5689@gmail.com","commits":1,"url":"https://github.com/ëŒ€ì›…í«"}]},"readingTime":{"minutes":4.29,"words":1286},"filePathRelative":"dev/SWì‚¬ê´€í•™êµì •ê¸€/WEEK08-PintOS_Project1_Threads.md","localizedDate":"2022ë…„ 11ì›” 17ì¼","excerpt":"<ul>\\n<li>SWì‚¬ê´€í•™êµ ì •ê¸€ 5ê¸° 8ì£¼ì°¨ íšŒê³ </li>\\n</ul>\\n","autoDesc":true}`);export{u as comp,D as data};
